<html>

<head></head>
<script src="./tfjs@4.1.0"></script>
<!-- <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm"></script> -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm/dist/tf-backend-wasm.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-cpu/dist/tf-backend-cpu.js"></script>
<script>
    run = async (a, b, c) => {
        let ttt = [];
        for (let i = 0; i++ < 1;) {
            let d = Date.now();
            const e = tf.add(a, 0);
            console.log(Date.now() - d);
            d = Date.now();
            const f = tf.add(b, 0);
            console.log(Date.now() - d);
            d = Date.now();
            const g = tf.add(e, f);
            console.log(Date.now() - d);
            d = Date.now();
            const ans = await g.dataSync();
            console.log(Date.now() - d);
            //tf.add(a, b).dataSync();
            ttt.push(Date.now() - d);
            tf.dispose(e);
            tf.dispose(f);
            tf.dispose(g);
        }
        return ttt;
    }
    start = async () => {
        a = Array.from({ length: 10000000 }, () => Math.floor(Math.random() * 10000000));
        b = Array.from({ length: 10000000 }, () => Math.floor(Math.random() * 10000000));
        //c = Array.from({ length: 10000000 }, () => Math.floor(Math.random() * 10000000));
        // for (let i = 0; i++ < 100;) {
        //     tf.setBackend("wasm");
        //     await tf.ready();
        //     var fff = await run(a, b);
        // }

        for (let i = 0; i++ < 100;) {
            tf.setBackend("cpu");
            await tf.ready();
            var ttt = await run(a, b);
            //console.log(i, fff, ttt);
        }
    }
    start();
</script>